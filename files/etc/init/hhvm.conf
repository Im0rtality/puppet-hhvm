# hhvm - HipHop VM
#
# The HipHopVM server provides a high performance PHP stack and web server.

description     "HHVM server"
author "Yermo Lamers http://twitter.com/yermolamers"

start on filesystem or runlevel [2345]
stop on runlevel [!2345]

respawn
respawn limit 10 5
umask 022

# Location of config and executable

env SERVER=/usr/local/src/hiphop-php/hhvm/hphp/hhvm/hhvm
env CONFIG_FILE=/etc/hhvm/config.hdf
env RUN_AS=www-data
env HHVM_PIDFILE=/var/run/hhvm/hhvm.pid
env HHVM_PORT=9000
env HHVM_SOCK=/var/run/hhvm/hhvm.sock
env HHVM_JITREPO=/tmp/.hhbc.hhvm

exec $SERVER -m daemon --config $CONFIG_FILE -v PidFile=$HHVM_PIDFILE -v Server.Type=fastcgi -v Server.Port=$HHVM_PORT -v Server.FileSocket=$HHVM_SOCK -v Repo.Central.Path=$HHVM_JITREPO --user $RUN_AS